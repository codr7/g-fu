* use sort.Search for Env
** bench
* expand macros all the way in EvalString
** add depth arg to Expand
*** -1 for infinite
* scan func/macro/let/task bodies for Sym's
** only dup/clone used syms when extending env
* optimize vec splats
** don't allocate new vec if no splats
* use type switch where applicable
** https://tour.golang.org/methods/16
** grep "\.("
* transducers

(>> (filter odd?) (map (fun (x) (x 42 +))))

(let (fib (fun n
            (if, < n 2
              n,
              (+, fib (- n 1), fib (- n 2)))))
  (dump (bench 10, for 10 (fib 20))))

(let (fib (fun, n a b,
            if n 
              (if, = n 1, b (recall, - n 1, b, + a b))
              a))
  (dump (bench 10, for 10000 (fib 20 0 1))))

(let loop (macro body..,
  let done? (g-sym) result (g-sym),
  
  '(let (break (macro (args..) '(recall T %args..)))
     ((fun ((%done? F) %result..)
        (if %done? %result.. (do %body.. (recall))))))))

(let while (macro, cond body..,
  '(loop
     (if %cond _, break)
     %body..)))
